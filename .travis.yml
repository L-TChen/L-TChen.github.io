language: haskell
branches:
  only: 
    - source
cabal: "2.4"
ghc: 
  - "8.6.5"
cache:
  directories:
    - $HOME/.cabal
install:
  - cabal new-install hakyll --lib --flags="-previewServer -watchServer"
  - cabal new-build
script:
  - cabal new-run site build
deploy:
  provider: pages
  local_dir: "_site/"
  target_branch: master
  skip_cleanup: true
  github_token: $GH_TOKEN
  on:
    branch: source
  keep_history: true
